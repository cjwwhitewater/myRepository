cmake_minimum_required(VERSION 3.1)

project(dcontroller LANGUAGES CXX)

set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)

set(CMAKE_SYSROOT /home/cjw/x-tools/aarch64-nano-linux-gnu/aarch64-nano-linux-gnu/sysroot)

include(/home/cjw/code/crossCompile/packagesForJetson.cmake)

add_executable(dcontroller src/main.cpp
    src/droneControlling/ControlModeManager.cpp src/droneControlling/ControlModeManager.h src/droneControlling/HeartBeatProcessor.cpp src/droneControlling/HeartBeatProcessor.h
    src/gpioManipulators/Attacker.cpp src/gpioManipulators/Attacker.h src/gpioManipulators/FanController.cpp src/gpioManipulators/FanController.h src/gpioManipulators/LightController.cpp src/gpioManipulators/LightController.h
    src/cameraControlling/cameraControlling.cpp src/cameraControlling/cameraControlling.h src/cameraControlling/GimbalDriver.cpp src/cameraControlling/GimbalDriver.h
    src/communication/globalThreadPool.cpp src/communication/globalThreadPool.h
    src/communication/essentialTextTransfer/ETTClient.cpp src/communication/essentialTextTransfer/ETTClient.h src/communication/essentialTextTransfer/ETTServer.cpp src/communication/essentialTextTransfer/ETTServer.h src/communication/essentialTextTransfer/Packager.cpp src/communication/essentialTextTransfer/Packager.h
    src/communication/messageTransfer/DatagramProcessor.cpp src/communication/messageTransfer/DatagramProcessor.h src/communication/messageTransfer/MTPClient.cpp src/communication/messageTransfer/MTPClient.h src/communication/messageTransfer/MTPCommon.cpp src/communication/messageTransfer/MTPCommon.h src/communication/messageTransfer/MTPServer.cpp src/communication/messageTransfer/MTPServer.h

)

target_link_libraries(dcontroller ${ALL_THIRD_PARTY_LIBS})

include(GNUInstallDirs)
install(TARGETS dcontroller
    LIBRARY DESTINATION ${CMAKE_INSTALL_LIBDIR}
    RUNTIME DESTINATION ${CMAKE_INSTALL_BINDIR}
)


